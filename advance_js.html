<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day 7, advanced JavaScript concepts</title>
    <link href="public/style.css" rel="stylesheet">
</head>

<body class="bg-gray-100 text-gray-800 font-sans pt-16">
    Please look at console for output
    <div>
        <p>Please click any list item from below</p>
        <ul id="category">
            <li id="laptops">Laptops</li>
            <li id="cameras">Cameras</li>
            <li id="shoes">Shoes</li>
        </ul>
    </div>

    <div>
        <p>DOM manipulation with JavaScript (classList, add/remove classes)</p>
        <div id="myElement">Hello, World!</div>
        <button onclick="addClass()">Add Class</button>
        <button onclick="removeClass()">Remove Class</button>
        <button onclick="toggleClass()">Toggle Class</button>
    </div>

    <div>
        <p>Conditional rendering using JavaScript + Tailwind</p>
        <div id="app"></div>
    </div>

    <div>
        <p>Working with localStorage for persistent data</p>
        <h1>To-Do List</h1>
        <input type="text" id="task" placeholder="Enter a task">
        <button onclick="addTask()">Add Task</button>
        <ul id="taskList"></ul>
    </div>
    <!-- advanced JavaScript concepts -->
    <script>
        document.querySelector('#category').addEventListener('click', function (e) {
            console.log(e.target.id);
        });

        // Fetch API and AJAX basics
        async function fetchData() {
            try {
                const response = await fetch('https://jsonplaceholder.typicode.com/posts/1');
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                const data = await response.json();
                console.log(data);
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        }

        fetchData();

        const element = document.querySelector('#myElement');
        function addClass() {
            element.classList.add('highlight');
        }

        function removeClass() {
            element.classList.remove('highlight');
        }

        function toggleClass() {
            element.classList.toggle('highlight');
        }

        const app = document.getElementById('app');

        let isVisible = true;

        function render() {
            app.innerHTML = `
    <div class="p-4 ${isVisible ? 'bg-green-500' : 'bg-red-500'} text-black">
      ${isVisible ? 'Visible' : 'Hidden'}
    </div>
    <button class="mt-4 p-2 bg-blue-500 text-black" onclick="toggleVisibility()">
      Toggle Visibility
    </button>
  `;
        }

        function toggleVisibility() {
            isVisible = !isVisible;
            render();
        }

        render();

        // Load tasks from localStorage
        const tasks = JSON.parse(localStorage.getItem('tasks')) || [];

        function addTask() {
            const taskInput = document.getElementById('task');
            const task = taskInput.value;
            tasks.push(task);
            localStorage.setItem('tasks', JSON.stringify(tasks));
            displayTasks();
            taskInput.value = '';
        }

        function displayTasks() {
            const taskList = document.getElementById('taskList');
            taskList.innerHTML = '';
            tasks.forEach(task => {
                const li = document.createElement('li');
                li.textContent = task;
                taskList.appendChild(li);
            });
        }

        // Display tasks on page load
        displayTasks();

    </script>

</body>

</html>